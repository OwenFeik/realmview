<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>WASM Test</title>
    </head>
    <body style="margin: 0;">
        <script>
            function set_up_uploads(callback) {
                const input = document.createElement("input");
                input.type = "file";
                input.oninput = () => {
                    const image = document.createElement("img");    
                    image.onload = () => {
                        callback(image);
                    };

                    const file_reader = new FileReader();
                    file_reader.onloadend = () => {
                        image.src = window.URL.createObjectURL(
                            new Blob([file_reader.result])
                        );
                    };
                    file_reader.readAsArrayBuffer(input.files[0]);
                };

                const canvas = document.querySelector("canvas");
                canvas.onauxclick = () => input.click();
            }
        </script>
        <script type="module">
            import init from "./pkg/wasmtest.js";
            init();
        </script>
    </body>
</html>
