<ul
  class="dropdown-menu"
  id="canvas_sprite_dropdown"
  style="position: absolute; width: 200px;"
  data-id="0"
>
  <li class="dropend">
    <a
      class="dropdown-item dropdown-toggle"
      href="#"
      data-bs-toggle="dropdown"
    >Move to layer</a>
    <ul id="canvas_sprite_dropdown_layer_list" class="dropdown-menu">
      <!-- Populated by layers.js -->
      <li><a class="dropdown-item" href="#">Layer</a></li>
    </ul>
  </li>
</ul>
<script>
const canvas_sprite_dropdown = document.getElementById(
    "canvas_sprite_dropdown"
);

function sprite_dropdown(id, x, y) {
    canvas_sprite_dropdown.setAttribute("data-id", id);
    canvas_sprite_dropdown.style.left = x + "px";
    canvas_sprite_dropdown.style.top = y + "px";
    canvas_sprite_dropdown.classList.add("show");
    window.addEventListener("mousedown", hide_sprite_dropdown_listener);
}

function hide_sprite_dropdown_listener(e) {
    if (
        e.target != canvas_sprite_dropdown
        && !canvas_sprite_dropdown.contains(e.target)
    ) {
        hide_sprite_dropdown();
        window.removeEventListener("mousedown", hide_sprite_dropdown_listener);
    }
}

function hide_sprite_dropdown() {
    canvas_sprite_dropdown.classList.remove("show");
}
</script>
