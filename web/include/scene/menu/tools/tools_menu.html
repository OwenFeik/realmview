{{
  accordion_item(
    id="tools_menu",
    label="Tools",
    body=|
      <div class="btn-group" role="group" aria-label="Tool select">
        {{
          radio_check(
            id="tool_radio_select",
            group="tool_radio",
            active=1,
            label='{{ bootstrap_icon(cursor) }}',
            action="RustFuncs.select_tool('Select'); this.blur();"
          )
        }}
        {{
          radio_check(
            id="tool_radio_pan",
            group="tool_radio",
            label='{{ bootstrap_icon(arrows-move) }}',
            action="RustFuncs.select_tool('Pan'); this.blur();"
          )
        }}
        {{
          radio_check(
            id="tool_radio_draw",
            group="tool_radio",
            label='{{ bootstrap_icon(brush) }}',
            action="RustFuncs.select_tool('Draw'); this.blur();"
          )
        }}
      </div>
    |
  )
}}
{{
  accordion_item(
    id="draw_menu",
    label="Draw",
    body=|
      {{
        colour_input(
          id="draw_menu",
          action="c => update_draw_details('colour', c)",
          value="#FF00FF"
        )
      }}
      <div class="mt-1">
        {{
          editable_input(
            id="draw_menu_stroke",
            label="Stroke Width",
            type="number",
            min=0,
            max=1000,
            small=1,
            value=20,
            action="v => update_draw_details('stroke', v / 100)",
            noend=1
          )
        }}
          {{ dropdown_button(label="Start", secondary=1, small=1) }}
          <ul class="dropdown-menu">
            {{
              menu/draw_dropdown_option(
                key="cap_start",
                name="Arrow",
                label='Arrow {{ bootstrap_icon(arrow-left) }}'
              )
            }}
            {{
              menu/draw_dropdown_option(
                key="cap_start",
                name="Round",
                label='Round {{ bootstrap_icon(circle) }}'
              )
            }}
            {{ menu/draw_dropdown_option(key="cap_start", name="None") }}
          </ul>
          {{ dropdown_button(label="End", secondary=1, small=1) }}
          <ul class="dropdown-menu">
            {{
              menu/draw_dropdown_option(
                key="cap_end",
                name="Arrow",
                label='Arrow {{ bootstrap_icon(arrow-right) }}'
              )
            }}
            {{
              menu/draw_dropdown_option(
                key="cap_end",
                name="Round",
                label='Round {{ bootstrap_icon(circle) }}'
              )
            }}
            {{ menu/draw_dropdown_option(key="cap_end", name="None") }}
          </ul>
        </div>
        <div class="mt-1">
          {{ dropdown_button(label="Shape", secondary=1, small=1) }}
          <ul class="dropdown-menu">
            {{
              menu/draw_dropdown_option(
                key="shape",
                name="Ellipse",
                label='Ellipse {{ bootstrap_icon(circle) }}'
              )
            }}
            {{
              menu/draw_dropdown_option(
                key="shape",
                name="Rectangle",
                label='Rectangle {{ bootstrap_icon(square) }}'
              )
            }}
            {{
              menu/draw_dropdown_option(
                key="cap_end",
                name="None",
                value=null
              )
            }}
          </ul>
        </div>
      </div>
    |
  )
}}
<script>
function update_draw_details(property, value) {
    let obj = {};
    obj[property] = value;
    RustFuncs.draw_details(JSON.stringify(obj));
}
</script>
