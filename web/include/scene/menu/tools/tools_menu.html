{{
  accordion_item(
    id="tools_menu",
    label="Tools",
    body=|
      <div class="btn-group" role="group" aria-label="Tool select">
        {{
          radio_check(
            id="tool_radio_select",
            group="tool_radio",
            active=1,
            label='{{ bootstrap_icon(cursor) }}',
            action="RustFuncs.select_tool('Select')"
          )
        }}
        {{
          radio_check(
            id="tool_radio_pan",
            group="tool_radio",
            label='{{ bootstrap_icon(arrows-move) }}',
            action="RustFuncs.select_tool('Pan')"
          )
        }}
        {{
          radio_check(
            id="tool_radio_draw",
            group="tool_radio",
            label='{{ bootstrap_icon(brush) }}',
            action="RustFuncs.select_tool('Draw')"
          )
        }}
      </div>
    |
  )
}}
{{
  accordion_item(
    id="draw_menu",
    label="Draw",
    body=|
      {{
        colour_input(
          id="draw_menu",
          action="c => update_draw_details('colour', c)",
          value="#FF00FF"
        )
      }}
      <div class="mt-1">
        {{
          editable_input(
            id="draw_menu_stroke",
            label="Stroke Width",
            type="number",
            min=0,
            max=1000,
            small=1,
            value=20,
            action="v => update_draw_details('stroke', v / 100)",
            noend=1
          )
        }}
          {{ dropdown_button(label="Start", secondary=1, small=1) }}
          <ul class="dropdown-menu">
            {{
              menu/draw_dropdown_option(
                key="cap_start",
                name="Arrow",
                label='Arrow {{ bootstrap_icon(arrow-left) }}'
              )
            }}
            {{
              menu/draw_dropdown_option(
                key="cap_start",
                name="Round",
                label='Round {{ bootstrap_icon(circle) }}'
              )
            }}
            {{ menu/draw_dropdown_option(key="cap_start", name="None") }}
          </ul>
          {{ dropdown_button(label="End", secondary=1, small=1) }}
          <ul class="dropdown-menu">
            {{
              menu/draw_dropdown_option(
                key="cap_end",
                name="Arrow",
                label='Arrow {{ bootstrap_icon(arrow-right) }}'
              )
            }}
            {{
              menu/draw_dropdown_option(
                key="cap_end",
                name="Round",
                label='Round {{ bootstrap_icon(circle) }}'
              )
            }}
            {{ menu/draw_dropdown_option(key="cap_end", name="None") }}
          </ul>
        </div>
        <div class="mt-1">
          <div class="btn-group" role="group" aria-label="Tool select">
            {{
              radio_check(
                group="draw_radio",
                active=1,
                label='{{ bootstrap_icon(brush) }}',
                action="
                  update_draw_details(
                    ['drawing_type', 'shape'], ['Freehand', null]
                  )
                "
              )
            }}
            {{
              radio_check(
                group="draw_radio",
                label='{{ bootstrap_icon(slash-lg) }}',
                action="
                  update_draw_details(
                    ['drawing_type', 'shape'], ['Line', null]
                  )
                "
              )
            }}
            {{
              radio_check(
                group="draw_radio",
                label='{{ bootstrap_icon(square) }}',
                action="
                  update_draw_details(
                    ['shape', 'drawing_type'], ['Rectangle', null]
                  )
                "
              )
            }}
            {{
              radio_check(
                group="draw_radio",
                label='{{ bootstrap_icon(circle) }}',
                action="
                  update_draw_details(
                    ['shape', 'drawing_type'], ['Ellipse', null]
                  )
                "
              )
            }}
          </div>
        </div>
      </div>
    |
  )
}}
<script>
function update_draw_details(properties, values) {
    let obj = {};
    if (Array.isArray(properties)) {
        properties.forEach((p, i) => {
            obj[p] = values[i];
        });
    } else {
      obj[properties] = values;
    }

    RustFuncs.draw_details(JSON.stringify(obj));
}
</script>
